!function(){"use strict";function e(e){if(isNaN(e))return e;var t=parseInt(e);return t<10?"0"+t:e}function t(t,n){var r=function(t){if(/-/.test(t))return"";var n,r=t.indexOf("PM")>-1,i=/^([0-9]{2})/.exec(t),a=i?parseInt(i[1]):"",o=24===(n=12===a?r?12:0:r?a+12:a)?0:n;return t.replace(/^[0-9]{2}:([0-9]{2}) (AM|PM)/,e(o)+":$1")}(n.indexOf("-")>-1?"":n);t.setAttribute("data-value",r)}function n(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var r=n("input"),i=n("change");function a(e,t){var n={input:r,change:i}[t];(function(e){return!/--/.test(e.value)})(e)&&e.dispatchEvent(n)}function o(e){a(e,"input"),a(e,"change")}function u(e){e.value="--:-- --",t(e,""),o(e)}function c(e){return isNaN(e)?e:parseInt(e)}function l(e){return e<=12?0===e?12:e:e-12}function s(n,r){var i=function(t){if(""===t)return"--:-- --";var n=/([0-9]{2})\:([0-9]{2})/.exec(t),r=c(n[1]),i=n[2],a=r>=12?"PM":"AM";return[e(l(r)),":",i," ",a].join("")}(r);n.value=i,t(n,r)}function f(e){return s(e,e.value),e}function d(e,t){var n;function r(t,n){return function(){e.setSelectionRange(t,n)}}n="mode"===t?"text":"tel",e.setAttribute("type",n),{hrs:r(0,2),min:r(3,5),mode:r(6,8)}[t](e)}var v={hrs:{start:0,end:2},min:{start:3,end:5},mode:{start:6,end:8}};function p(e){var t=function(e){return{start:e.selectionStart,end:e.selectionEnd}}(e);for(var n in v){var r=v[n],i=r.start<=t.start,a=r.end>=t.end;if(i&&a)return n}return"hrs"}var m=[];var h={items:function(){return m},clear:function(){m=[]},add:function(e){m.push(e)}},b=Object.keys(v);function g(e,t){var n=t||e.value,r=/([0-9-]{1,2})\:([0-9-]{1,2})\s?(AM|PM|\-\-)?/.exec(n);return{hrs:c(r[1]),min:c(r[2]),mode:r[3]}}function w(e,t){setTimeout((function(){var n=p(e),r=g(e)[n],i="--"==r?"blank":r,a={hrs:"Hours",min:"Minutes",mode:"AM/PM"}[n],o={initial:"$label grouping $fullValue.",select:"$segmentName spin button $segmentValue.",update:"$segmentValue."},u=t.map((function(e){return o[e]?o[e]:e})),c=e.value.replace(/--/g,"blank"),l="<p>"+u.join("</p><p>")+"</p>";l=(l=(l=(l=l.replace(/\$label/g,e.polyfill.label)).replace(/\$segmentName/g,a)).replace(/\$segmentValue/g,i)).replace(/\$fullValue/g,c),e.polyfill.$a11y.innerHTML=l}),1)}function y(e,t){var n=p(e),r="next"===t?1:-1,i=b.indexOf(n)+r;d(e,{next:b[i]||"mode",prev:i<0?"hrs":b[i]}[t]),h.clear(),w(e,["select"])}function A(e){y(e,"next")}function E(e){y(e,"prev")}function M(e){u(e),d(e,"hrs")}function L(n,r,i){var a=g(n);a[r]=i;var u=[e(a.hrs),":",e(a.min)," ",a.mode].join("");n.value=u,d(n,r),t(n,u),o(n)}var x=[48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105],k={};function S(e,t){L(e,"mode",{"--":t=t||"AM",AM:"PM",PM:"AM"}[g(e).mode])}function _(t,n,r){var i,a=g(t),o="up"===r?1:-1;if("--"===a[n]){var u=new Date;i={hrs:l(u.getHours()),min:u.getMinutes()}}else{var c={up:a.min<59?a.min+o:0,down:0===a.min?59:a.min+o};i={hrs:l(a.hrs+o),min:c[r]}}L(t,n,e(i[n]))}function $(e){!function(e,t){"mode"===t?S(e,"AM"):_(e,t,"up"),w(e,["update"])}(e,p(e))}function D(e){!function(e,t){"mode"===t?S(e,"PM"):_(e,t,"down"),w(e,["update"])}(e,p(e))}function P(e,t){var n=p(e);"mode"===n&&L(e,n,t)}x.forEach((function(e,t){var n=t>9?t-10:t;k[e]=n}));function O(e,t){var n=/\s/.test(e.value);12!=t&&24!=t&&(t=n?24:12),{12:function(){n||s(e,e.dataset.value)},24:function(){n&&function(e){var t=e.dataset.value;e.value=t}(e)}}[t]()}var q={ArrowDown:40,ArrowRight:39,ArrowUp:38,ArrowLeft:37,Backspace:8,Delete:46,Tab:9,Shift:16,Escape:27,a:65,p:80};function N(e){var t=!1;document.addEventListener("keydown",(function(e){t=e.shiftKey})),document.addEventListener("keyup",(function(e){t=e.shiftKey})),e.form&&e.form.addEventListener("submit",(function(){!function(e){e.polyfill.autoSwap&&(O(e,24),setTimeout((function(){O(e,12)}),1))}(e)}));var n=!1;e.addEventListener("mousedown",(function(){n=!0})),e.addEventListener("mouseup",(function(){setTimeout((function(){""===e.value&&M(e)}),1)})),e.addEventListener("click",(function(t){!function(e){d(e,p(e))}(e)})),e.addEventListener("blur",(function(){n=!1})),e.addEventListener("focus",(function(r){n||(r.preventDefault(),d(e,t?"mode":"hrs"));w(e,["initial","select"])})),e.addEventListener("keydown",(function(t){if(13===t.which)return!0;var n=x.indexOf(t.which)>-1,r=function(e){var t=[];for(var n in e)t.push(e[n]);return t}(q).indexOf(t.which)>-1,i=[q.ArrowDown,q.ArrowRight,q.ArrowUp,q.ArrowLeft].indexOf(t.which)>-1,a=[q.a,q.p].indexOf(t.which)>-1,o=[q.Delete,q.Backspace].indexOf(t.which)>-1;if((!r||i||n||a||o)&&t.preventDefault(),n&&function(e,t){var n=k[t],r=p(e);if("mode"!==r){var i=h.items().length,a={hrs:[1,2],min:[5,9]},o=a[r][i];i<2&&h.add(n);var u=parseInt(a[r].join("")),c=parseInt(h.items().join(""));u>=c&&L(e,r,c),(n>o||2===h.items().length)&&A(e)}}(e,t.which),o){var u=p(e);!function(e,t){L(e,t,"--"),w(e,["update"])}(e,u)}switch(t.which){case q.ArrowRight:A(e);break;case q.ArrowLeft:E(e);break;case q.ArrowUp:$(e);break;case q.ArrowDown:D(e);break;case q.Escape:M(e);break;case q.a:P(e,"AM");break;case q.p:P(e,"PM");break;case q.Tab:!function(e,t){var n=p(e),r=t.shiftKey&&"hrs"===n,i=!t.shiftKey&&"mode"===n;r||i||(t.preventDefault(),t.shiftKey?E(e):A(e))}(e,t)}}))}function T(e){var t=function(e){var t=e.getAttribute("aria-labelledby");if(t){var n=document.getElementById(t);if(n)return n.textContent}return!1}(e)||function(e){var t=e.getAttribute("aria-label");return t||!1}(e)||function(e){if(e.id){var t=document.querySelector('label[for="'+e.id+'"]');if(t)return t.textContent}return!1}(e)||function(e){var t=function(e,t){for(var n=e,r=[];n;){if(r.push(n),n.msMatchesSelector?n.msMatchesSelector(t):n.matches(t))return r;n=n.parentElement}return r}(e,"label"),n=t[t.length-1];return"LABEL"==n.nodeName&&n.textContent}(e)||function(e){var t=e.getAttribute("title");return t||!1}(e);if(t)return t;throw console.error("Label text for input not found.",e),new Error("Cannot polyfill time input due to a missing label.")}var C,j=!1;function I(e,n){var r;e.setAttribute("autocomplete","off"),e.setAttribute("aria-hidden",!0),j||((r=document.createElement("div")).setAttribute("aria-live","assertive"),r.setAttribute("style","position: absolute; opacity: 0; height: 0; width: 0; overflow: hidden; pointer-events: none;"),r.classList.add("time-input-polyfill-accessibility-block"),document.querySelector("body").appendChild(r),C=r,j=!0);var i=n?n.textContent:T(e);e.polyfill={$a11y:C,label:i,autoSwap:!0,update:function(){f(e)},swap:function(t){O(e,t)}},""===e.value||/--/.test(e.value)?(u(e),t(e,"")):(f(e),t(e,e.value)),N(e)}window&&(window.TimePolyfill=I);var K=function(e){return Array.prototype.slice.call(e,0)};document.addEventListener("DOMContentLoaded",(function(){var e,t;(e="input.time",t=document.querySelectorAll(e),K(t)).forEach((function(e){new I(e),e.oninput=function(){console.log("input",e.dataset.value)},e.onchange=function(){console.log("change",e.dataset.value)},e.addEventListener("change",(function(){console.log("listener change")})),e.addEventListener("input",(function(){console.log("listener input")}))})),document.querySelector("form").onsubmit=function(e){e.preventDefault();var t,n=function(e,t){var n={};return K(e.elements).forEach((function(e,r){"INPUT"===e.nodeName&&(n[t[r]]=e.value)})),n}(this,(t=[],K(this.children).forEach((function(e){var n=e.querySelector("label");n&&t.push(n.textContent)})),t)),r=document.querySelector(".result");!function(e,t){if("undefined"!=typeof gtag)t?gtag("event",e,{event_category:t[0],event_label:t[1],value:t[2]}):gtag("event",e);else{var n={action:e,event_category:(t={}).category||"general",event_label:t.label||"(not set)",value:t.value};console.log("GA event =",n,"* = required")}}("form submit"),function(e,t){var n=e.querySelector(".result__list"),r=e.querySelector(".result__close"),i="";for(var a in t)i+=['<div class="result__item">','<dt class="result__label">',a,"</dt>",'<dd class="result__value">"',t[a].replace(/^$/,'<span class="visually-hidden">blank</span>'),'"</dd>',"</div>"].join("");n.innerHTML=i,e.classList.add("-visible"),r.onclick=function(){e.classList.remove("-visible")}}(r,n),r.focus()}}))}();
//# sourceMappingURL=main.js.map
